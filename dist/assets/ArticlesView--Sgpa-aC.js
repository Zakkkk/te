import{o as c,c as g,r as D,n as d,a as m,w as u,u as n,b as e,t as y,d as L,R as f,e as U,p as k,f as A,_ as x,g as _,h as B,i as S,S as O,j as M,v as R,k as J,F as j}from"./index-6HXr6pZh.js";import{g as z,a as E,l as W,e as q,b as w}from"./dates--c6NlEyh.js";const G={__name:"ArticleList",props:{displayType:0},setup(a){const t=a;return(r,o)=>(c(),g("div",{class:d("article-list article-list-displayType-"+t.displayType)},[D(r.$slots,"default")],2))}},H=a=>(k("data-v-eef5219d"),a=a(),A(),a),K=["alt","src"],P={class:"article-content-wrapper"},Q={class:"article-title-wrapper"},X={class:"article-title"},Y={class:"article-meta-wrapper"},Z=H(()=>e("span",{class:"article-meta-sep"},"/",-1)),tt=["datetime"],et={class:"article-description"},st={__name:"ArticleListItem",props:{displayType:0,articleId:0,title:"article title",imgUrl:"",authorId:0,author:"author",date:new Date().getTime(),description:"description",searchFilter:""},setup(a){const t=a;function r(){return t.title.toLowerCase().includes(t.searchFilter.trim().toLowerCase())||t.description.toLowerCase().includes(t.searchFilter.trim().toLowerCase())||t.author.toLowerCase().includes(t.searchFilter.trim().toLowerCase())}const o=`/articles/${t.articleId}`;return(h,v)=>r()?(c(),g("article",{key:0,class:d(`article-displayType-${t.displayType}`)},[m(n(f),{to:o,class:"article-image-wrapper"},{default:u(()=>[e("img",{alt:`Main image for '${t.title}'`,class:"article-image",src:t.imgUrl},null,8,K)]),_:1}),e("div",P,[e("div",Q,[m(n(f),{to:o},{default:u(()=>[e("h6",X,y(t.title),1)]),_:1})]),e("div",Y,[m(n(f),{class:"article-author",to:`/author/${t.authorId}`},{default:u(()=>[e("address",null,y(t.author),1)]),_:1},8,["to"]),Z,e("time",{class:"article-date",datetime:n(z)(t.date)},y(n(E)(t.date)),9,tt)]),e("p",et,[m(n(f),{to:o},{default:u(()=>[U(y(t.description),1)]),_:1})])])],2)):L("",!0)}},at=x(st,[["__scopeId","data-v-eef5219d"]]),I={get:a=>JSON.parse(localStorage.getItem(a)),set:(a,t)=>{localStorage.setItem(a,JSON.stringify(t))}},p=a=>(k("data-v-4ba9f5bd"),a=a(),A(),a),lt=p(()=>e("h3",null,"Search for an article",-1)),it=p(()=>e("p",null,"Begin by typing an article title, tags or related words.",-1)),ot=p(()=>e("br",null,null,-1)),rt={class:"articles-filters"},nt={class:"button-group"},ct={class:"button-group"},dt=p(()=>e("span",{class:"material-symbols-outlined"},"view_day",-1)),ut=[dt],pt=p(()=>e("span",{class:"material-symbols-outlined"},"density_small",-1)),_t=[pt],mt=p(()=>e("br",null,null,-1)),ht={key:0,class:"loadmore"},vt=6,yt={__name:"ArticlesView",setup(a){let t=I.get("displayType");q(t)||(t=0);const r=_(t),o=_(!0),h=_(""),v=_([]),C=_(1);let b=0;function T(l){r.value=l,I.set("displayType",l)}function F(l){o.value!=l&&(o.value=l,I.set("newestFirst",l),v.value=[],b=0,$())}async function $(){W(vt,b,null,!o.value).then(l=>{console.log(l),v.value.push(...l.articles),b+=l.articles.length,C.value=l.remaining})}function N(l){for(let s=0;s<w.length;s++)if(w[s].id==l)return w[s].name;return`author #${l} not found`}function V(){}return B(async()=>{$()}),(l,s)=>(c(),S(O,null,{default:u(()=>[lt,it,M(e("input",{"onUpdate:modelValue":s[0]||(s[0]=i=>h.value=i),type:"text",placeholder:"Search for an article...",onInput:V},null,544),[[R,h.value]]),ot,e("div",rt,[e("div",nt,[e("button",{onClick:s[1]||(s[1]=i=>F(!0)),class:d(`button-small ${o.value==1?"button-active":""}`)}," Newest ",2),e("button",{onClick:s[2]||(s[2]=i=>F(!1)),class:d(`button-small ${o.value==0?"button-active":""}`)}," Oldest ",2)]),e("div",ct,[e("button",{onClick:s[3]||(s[3]=i=>T(0)),class:d(`button-small ${r.value==0?"button-active":""}`)},ut,2),e("button",{onClick:s[4]||(s[4]=i=>T(1)),class:d(`button-small ${r.value==1?"button-active":""}`)},_t,2)])]),mt,m(G,{displayType:r.value},{default:u(()=>[(c(!0),g(j,null,J(v.value,i=>(c(),S(at,{displayType:r.value,articleId:i.id,title:i.title,imgUrl:i.imgUrl,authorId:i.author,author:N(i.author),date:i.date,description:i.content.slice(0,220),searchFilter:h.value},null,8,["displayType","articleId","title","imgUrl","authorId","author","date","description","searchFilter"]))),256))]),_:1},8,["displayType"]),C.value!=0?(c(),g("div",ht,[e("button",{onClick:s[5]||(s[5]=i=>$())},"More Articles")])):L("",!0)]),_:1}))}},bt=x(yt,[["__scopeId","data-v-4ba9f5bd"]]);export{bt as default};
